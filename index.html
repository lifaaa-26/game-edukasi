<!DOCTYPE html>
<html lang="id">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>Kuis Sejarah Indonesia - Tema Sejarah</title>
Â  <style>
Â  Â  /* ---------- Theme: Sejarah / Klasik (perkamen) but high-contrast text ---------- */
Â  Â  :root{
Â  Â  Â  --paper-1: #2b210f; /* darkened paper to keep vintage feel but high contrast */
Â  Â  Â  --paper-2: #251b0c;
Â  Â  Â  --ink: #ffffff;Â  Â  Â  Â  Â  Â  Â /* changed to white for readability */
Â  Â  Â  --muted: rgba(255,255,255,0.75);
Â  Â  Â  --accent:#c79a5a; /* bronze-ish accent */
Â  Â  Â  --accent-2:#b07a42;
Â  Â  Â  --success:#2ecc71;
Â  Â  Â  --danger:#ff6b6b;
Â  Â  Â  --warning:#f1c40f;
Â  Â  Â  --card-shadow: rgba(0,0,0,0.75);
Â  Â  Â  --line: rgba(255,255,255,0.5); /* MODIFIKASI: Ditingkatkan opasitasnya dari 0.12 menjadi 0.5 */
Â  Â  }
Â  Â  *{box-sizing:border-box}
Â  Â  html,body{height:100%}
Â  Â  body{
Â  Â  Â  margin:0;
Â  Â  Â  min-height:100vh;
Â  Â  Â  font-family: "Georgia", "Times New Roman", serif;
Â  Â  Â  background:
Â  Â  Â  Â  radial-gradient(circle at 10% 10%, rgba(255,255,255,0.02), transparent 8%),
Â  Â  Â  Â  linear-gradient(180deg, #0b0a08 0%, #1a1410 100%);
Â  Â  Â  color:var(--ink);
Â  Â  Â  display:flex;
Â  Â  Â  align-items:center;
Â  Â  Â  justify-content:center;
Â  Â  Â  padding:28px;
Â  Â  }

Â  Â  .app { width:100%; max-width:920px; padding:18px; }

Â  Â  /* card */
Â  Â  .card{
Â  Â  Â  position:relative;
Â  Â  Â  background: linear-gradient(180deg, var(--paper-1), var(--paper-2));
Â  Â  Â  border-radius:12px;
Â  Â  Â  padding:26px;
Â  Â  Â  box-shadow: 0 20px 60px var(--card-shadow);
Â  Â  Â  border:6px solid rgba(255,255,255,0.04);
Â  Â  Â  overflow:visible;
Â  Â  Â  background-image:
Â  Â  Â  Â  linear-gradient(transparent, rgba(255,255,255,0.01)),
Â  Â  Â  Â  repeating-linear-gradient(0deg, rgba(255,255,255,0.06) 0 1px, transparent 1px 40px); /* MODIFIKASI: Ditingkatkan opasitas garis dari 0.01 menjadi 0.06 */
Â  Â  }

Â  Â  /* header */
Â  Â  .header{
Â  Â  Â  display:flex;
Â  Â  Â  align-items:center;
Â  Â  Â  justify-content:space-between;
Â  Â  Â  gap:12px;
Â  Â  Â  margin-bottom:12px;
Â  Â  Â  border-bottom:1px dashed var(--line);
Â  Â  Â  padding-bottom:12px;
Â  Â  }
Â  Â  .brand { display:flex; gap:14px; align-items:center; }
Â  Â  .seal{
Â  Â  Â  width:56px; height:56px;
Â  Â  Â  border-radius:50%;
Â  Â  Â  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.06), transparent 20%),
Â  Â  Â  Â  Â  Â  Â  Â  Â linear-gradient(180deg,var(--accent),var(--accent-2));
Â  Â  Â  display:flex; align-items:center; justify-content:center;
Â  Â  Â  color: #fff; font-weight:800; font-family: "Georgia", serif;
Â  Â  Â  box-shadow: 0 6px 18px rgba(0,0,0,0.5), inset 0 -4px 10px rgba(0,0,0,0.25);
Â  Â  }
Â  Â  h1{ margin:0; font-size:20px; color:var(--ink); letter-spacing:0.2px }
Â  Â  .meta{ color:var(--muted); font-size:13px }

Â  Â  /* start */
Â  Â  .start-center{ text-align:center; padding:8px 6px }
Â  Â  input[name="player"]{
Â  Â  Â  width:70%;
Â  Â  Â  max-width:420px;
Â  Â  Â  padding:10px 12px;
Â  Â  Â  border-radius:8px;
Â  Â  Â  border:1px solid var(--line);
Â  Â  Â  background: rgba(255,255,255,0.03);
Â  Â  Â  color:var(--ink);
Â  Â  Â  outline:none;
Â  Â  Â  font-size:15px;
Â  Â  Â  margin-top:12px;
Â  Â  Â  font-family:inherit;
Â  Â  }

Â  Â  .controls{ margin-top:12px; display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap }
Â  Â  .btn {
Â  Â  Â  display:inline-block;
Â  Â  Â  padding:10px 16px;
Â  Â  Â  border-radius:10px;
Â  Â  Â  border:2px solid rgba(255,255,255,0.06);
Â  Â  Â  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
Â  Â  Â  color:var(--ink);
Â  Â  Â  font-weight:700;
Â  Â  Â  cursor:pointer;
Â  Â  Â  box-shadow: 0 6px 18px rgba(0,0,0,0.3);
Â  Â  Â  transition: transform .12s ease, box-shadow .12s ease;
Â  Â  Â  font-family:inherit;
Â  Â  }
Â  Â  .btn:hover{ transform:translateY(-3px); box-shadow: 0 14px 30px rgba(0,0,0,0.45) }
Â  Â  .btn.ghost{ background:transparent; color:var(--muted); border-color:var(--line) }
Â  Â  .btn.primary{
Â  Â  Â  background: linear-gradient(180deg,var(--accent),var(--accent-2));
Â  Â  Â  color:#fff;
Â  Â  Â  border-color: rgba(0,0,0,0.08);
Â  Â  }

Â  Â  /* quiz */
Â  Â  #quizScreen { display:none; margin-top:14px; }
Â  Â  .top-row{
Â  Â  Â  display:flex; align-items:center; justify-content:space-between;
Â  Â  Â  gap:12px; padding-bottom:12px; margin-bottom:12px;
Â  Â  Â  border-bottom:1px dashed var(--line);
Â  Â  }
Â  Â  .timer{
Â  Â  Â  color:var(--ink);
Â  Â  Â  font-weight:800;
Â  Â  Â  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
Â  Â  Â  padding:8px 10px;
Â  Â  Â  border-radius:8px;
Â  Â  Â  border:1px solid var(--line);
Â  Â  }
Â  Â  .progress{ color:var(--muted); font-size:13px }

Â  Â  .question {
Â  Â  Â  font-size:18px;
Â  Â  Â  font-weight:800;
Â  Â  Â  margin:12px 0;
Â  Â  Â  color:var(--ink);
Â  Â  Â  text-shadow: 0 1px 0 rgba(0,0,0,0.6);
Â  Â  }

Â  Â  .options{ display:flex; flex-direction:column; gap:12px; margin-top:6px }

Â  Â  .opt{
Â  Â  Â  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
Â  Â  Â  border-radius:10px;
Â  Â  Â  padding:14px 16px;
Â  Â  Â  cursor:pointer;
Â  Â  Â  color:var(--ink);
Â  Â  Â  font-weight:700;
Â  Â  Â  border:1px solid var(--line);
Â  Â  Â  transition: transform .12s ease, box-shadow .12s ease, border-color .12s;
Â  Â  Â  position:relative;
Â  Â  Â  overflow:hidden;
Â  Â  Â  font-family:inherit;
Â  Â  }
Â  Â  .opt:hover{
Â  Â  Â  transform: translateY(-6px);
Â  Â  Â  box-shadow: 0 18px 40px rgba(0,0,0,0.45);
Â  Â  Â  border-color: rgba(255,255,255,0.22);
Â  Â  }
Â  Â  .opt.correct{
Â  Â  Â  border-color: rgba(46,204,113,0.32);
Â  Â  Â  box-shadow: 0 10px 30px rgba(46,204,113,0.06);
Â  Â  Â  background: linear-gradient(180deg, rgba(46,204,113,0.04), rgba(255,255,255,0.02));
Â  Â  }
Â  Â  .opt.wrong{
Â  Â  Â  border-color: rgba(255,107,107,0.32);
Â  Â  Â  box-shadow: 0 10px 30px rgba(255,107,107,0.06);
Â  Â  Â  background: linear-gradient(180deg, rgba(255,107,107,0.03), rgba(255,255,255,0.01));
Â  Â  }

Â  Â  /* notif / stamp */
Â  Â  .stamp{
Â  Â  Â  display:inline-block;
Â  Â  Â  font-weight:900;
Â  Â  Â  padding:8px 12px;
Â  Â  Â  border-radius:6px;
Â  Â  Â  font-family: "Georgia", serif;
Â  Â  Â  box-shadow: 0 6px 18px rgba(0,0,0,0.4);
Â  Â  }
Â  Â  .stamp.correct{ background: rgba(46,204,113,0.12); color:var(--success); border:1px solid rgba(46,204,113,0.18) }
Â  Â  .stamp.wrong{ background: rgba(255,107,107,0.08); color:var(--danger); border:1px solid rgba(255,107,107,0.12) }
Â  Â  .stamp.timeout{ background: rgba(255,165,0,0.08); color:var(--warning); border:1px solid rgba(255,165,0,0.12) }

Â  Â  #resultScreen{ display:none; text-align:center; margin-top:12px }
Â  Â  .result-score{ font-size:20px; font-weight:800; color:var(--ink) }
Â  Â  .small{ font-size:13px; color:var(--muted) }

Â  Â  .footer{ margin-top:18px; border-top:1px dashed var(--line); padding-top:12px; display:flex; justify-content:space-between; color:var(--muted); font-size:13px }

Â  Â  @media (max-width:780px){
Â  Â  Â  .app{ padding:12px }
Â  Â  Â  input[name="player"]{ width:100% }
Â  Â  Â  .top-row{ flex-direction:column; align-items:flex-start; gap:8px }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="app">
Â  Â  <div class="card" id="mainCard">
Â  Â  Â  <div class="header">
Â  Â  Â  Â  <div class="brand">
Â  Â  Â  Â  Â  <div class="seal">KS</div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <h1>Kuis Sejarah Indonesia</h1>
Â  Â  Â  Â  Â  Â  <div class="meta small">20 soal acak dari bank soal (SD / SMP / SMK)</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="meta small">oleh: Kamu</div>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="startScreen" class="start-center">
Â  Â  Â  Â  <p class="small">Masukkan nama untuk memulai kuis:</p>
Â  Â  Â  Â  <input name="player" id="playerName" placeholder="Nama kamu..." autocomplete="off" />
Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  <button id="startBtn" class="btn primary" onclick="startQuiz()">ğŸš€ Mulai Kuis</button>
Â  Â  Â  Â  Â  <button class="btn ghost" onclick="showAllQuestions()">ğŸ“š Lihat Semua Soal</button>
Â  Â  Â  Â  Â  <button class="btn" onclick="toggleSettings()">âš™ï¸ Pengaturan</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="settings" style="display:none;margin-top:12px;text-align:left;color:var(--muted)">
Â  Â  Â  Â  Â  <label style="display:block;margin-bottom:8px"><input type="checkbox" id="shufflePool" checked /> Acak pool soal tiap game</label>
Â  Â  Â  Â  Â  <label style="display:block;margin-bottom:8px">Jumlah soal tiap game:
Â  Â  Â  Â  Â  Â  <select id="perGame" style="margin-left:8px">
Â  Â  Â  Â  Â  Â  Â  <option value="10">10</option>
Â  Â  Â  Â  Â  Â  Â  <option value="15">15</option>
Â  Â  Â  Â  Â  Â  Â  <option value="20" selected>20</option>
Â  Â  Â  Â  Â  Â  Â  <option value="30">30</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="quizScreen">
Â  Â  Â  Â  <div class="top-row">
Â  Â  Â  Â  Â  <div class="timer" id="timer">â³ Waktu: 15s</div>
Â  Â  Â  Â  Â  <div class="progress" id="progress">Soal 1 / 20</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="questionCard">
Â  Â  Â  Â  Â  <div class="question" id="questionText">Pertanyaan muncul di sini</div>
Â  Â  Â  Â  Â  <div class="options" id="options"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="resultScreen">
Â  Â  Â  Â  <div class="result-score" id="resultText">Skor kamu</div>
Â  Â  Â  Â  <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:12px">
Â  Â  Â  Â  Â  <button class="btn" onclick="showScore()">ğŸ“Š Lihat Nilai</button>
Â  Â  Â  Â  Â  <button class="btn ghost" onclick="location.reload()">ğŸ”„ Main Lagi</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <p id="scoreDetail" class="small" style="margin-top:12px; display:none"></p>
Â  Â  Â  </div>

Â  Â  Â  <div class="footer">
Â  Â  Â  Â  <div>Durasi tiap soal: <span id="perQuestionTime">15</span> detik</div>
Â  Â  Â  Â  <div>Soal acak tiap permainan</div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  Â  <div id="notif" style="position:fixed;left:50%;top:14%;transform:translateX(-50%);z-index:999;"></div>

Â  <script>
Â  Â  /********* Data soal (campuran SD/SMP/SMK) *********/
Â  Â  let rawQuestions = [
Â  Â  Â  /* --- SD basic (1-20) --- */
Â  Â  Â  { q:"Kapan Indonesia memproklamasikan kemerdekaan?", opts:["17 Agustus 1945","1 Juni 1945","10 November 1945","20 Mei 1908"], a:"17 Agustus 1945" },
Â  Â  Â  { q:"Di kota mana Proklamasi Kemerdekaan dibacakan?", opts:["Jakarta","Yogyakarta","Surabaya","Bandung"], a:"Jakarta" },
Â  Â  Â  { q:"Siapa yang membacakan teks Proklamasi?", opts:["Soekarno","Mohammad Hatta","Sayuti Melik","Sudirman"], a:"Soekarno" },
Â  Â  Â  { q:"Siapa wakil presiden pertama RI?", opts:["Mohammad Hatta","Sutan Sjahrir","Sudirman","Soeharto"], a:"Mohammad Hatta" },
Â  Â  Â  { q:"Apa nama bendera Indonesia?", opts:["Sang Saka Merah Putih","Sang Saka Biru Putih","Merah Hitam","Emas Putih"], a:"Sang Saka Merah Putih" },
Â  Â  Â  { q:"Lambang negara Indonesia adalahâ€¦", opts:["Garuda Pancasila","Singa Merah","Bunga Melati","Naga Emas"], a:"Garuda Pancasila" },
Â  Â  Â  { q:"Berapa sila dalam Pancasila?", opts:["5","4","6","3"], a:"5" },
Â  Â  Â  { q:"Tanggal peringatan Hari Pahlawan setiap tahun?", opts:["10 November","17 Agustus","28 Oktober","1 Juni"], a:"10 November" },
Â  Â  Â  { q:"Sumpah Pemuda dikumandangkan pada tahun?", opts:["1928","1908","1945","1930"], a:"1928" },
Â  Â  Â  { q:"Siapa pahlawan wanita dari Jepara yang memperjuangkan pendidikan?", opts:["R.A. Kartini","Cut Nyak Dien","Cut Meutia","Martha Christina"], a:"R.A. Kartini" },
Â  Â  Â  { q:"Apa nama kerajaan Hindu tertua di Nusantara yang tercatat dalam prasasti?", opts:["Kutai","Majapahit","Sriwijaya","Mataram"], a:"Kutai" },
Â  Â  Â  { q:"Kerajaan Sriwijaya berpusat di pulauâ€¦", opts:["Sumatra","Jawa","Kalimantan","Sulawesi"], a:"Sumatra" },
Â  Â  Â  { q:"Apa nama lagu kebangsaan Indonesia?", opts:["Indonesia Raya","Hari Merdeka","Bendera Kita","Tanah Air"], a:"Indonesia Raya" },
Â  Â  Â  { q:"Peristiwa apa yang diperingati pada 28 Oktober?", opts:["Sumpah Pemuda","Hari Pahlawan","Hari Pendidikan","Hari Proklamasi"], a:"Sumpah Pemuda" },
Â  Â  Â  { q:"Siapa pahlawan dari Aceh yang terkenal melawan Belanda?", opts:["Cut Nyak Dien","Pattimura","Teuku Umar","Diponegoro"], a:"Cut Nyak Dien" },
Â  Â  Â  { q:"Siapa tokoh yang mendirikan Muhammadiyah?", opts:["KH Ahmad Dahlan","Ki Hajar Dewantara","Sukarno","Hatta"], a:"KH Ahmad Dahlan" },
Â  Â  Â  { q:"Organisasi Boedi Oetomo lahir pada tahunâ€¦", opts:["1908","1912","1928","1898"], a:"1908" },
Â  Â  Â  { q:"Apa fungsi pasukan PETA pada masa pendudukan Jepang?", opts:["Milisi lokal (Pembela Tanah Air)","Pemerintah sipil","Organisasi pelajar","Partai politik"], a:"Milisi lokal (Pembela Tanah Air)" },
Â  Â  Â  { q:"Lambang Sumpah Pemuda menekankan persatuan berdasarkanâ€¦", opts:["Tanah air, bangsa, bahasa","Agama dan suku","Golongan politik","Status sosial"], a:"Tanah air, bangsa, bahasa" },

Â  Â  Â  /* --- SMP mid (21-50) --- */
Â  Â  Â  { q:"Siapa penulis naskah 'Indonesia Menggugat'?", opts:["Ernest Douwes Dekker","Soekarno","Hatta","Sutan Sjahrir"], a:"Ernest Douwes Dekker" },
Â  Â  Â  { q:"Konferensi Asia-Afrika pertama diselenggarakan di kotaâ€¦", opts:["Bandung","Jakarta","Yogyakarta","Surabaya"], a:"Bandung" },
Â  Â  Â  { q:"Perjanjian Linggarjati dibuat antara Indonesia danâ€¦", opts:["Belanda","Portugal","Inggris","Spanyol"], a:"Belanda" },
Â  Â  Â  { q:"Apa tujuan Perjanjian Renville?", opts:["Menetapkan garis demarkasi dan gencatan senjata","Mendirikan pemerintahan baru","Pengakuan kemerdekaan penuh","Perdagangan"], a:"Menetapkan garis demarkasi dan gencatan senjata" },
Â  Â  Â  { q:"Peristiwa Bandung Lautan Api terjadi pada tahunâ€¦", opts:["1946","1945","1947","1948"], a:"1946" },
Â  Â  Â  { q:"Apa nama badan yang menyusun UUD 1945 pada awal kemerdekaan?", opts:["PPKI","BPUPKI","KNIP","BKR"], a:"PPKI" },
Â  Â  Â  { q:"Tokoh yang dikenal sebagai Bapak Pendidikan Nasional adalahâ€¦", opts:["Ki Hajar Dewantara","KH Ahmad Dahlan","Sutan Sjahrir","Sukarno"], a:"Ki Hajar Dewantara" },
Â  Â  Â  { q:"Peristiwa G30S/PKI terjadi pada tahunâ€¦", opts:["1965","1955","1975","1960"], a:"1965" },
Â  Â  Â  { q:"Apa nama pertempuran besar di Surabaya 1945?", opts:["Pertempuran Surabaya","Bandung Lautan Api","Serangan Umum 1 Maret","Agresi Militer Belanda"], a:"Pertempuran Surabaya" },
Â  Â  Â  { q:"Siapa pemimpin yang terkenal memimpin pertempuran Ambarawa?", opts:["Jenderal Sudirman","Bung Tomo","Affandi","Sudirman"], a:"Jenderal Sudirman" },
Â  Â  Â  { q:"Konferensi Meja Bundar (KMB) menghasilkanâ€¦", opts:["Pengakuan kedaulatan RI (1949)","Deklarasi perang","Pembagian wilayah VOC","Perjanjian dagang"], a:"Pengakuan kedaulatan RI (1949)" },
Â  Â  Â  { q:"Siapa tokoh yang memimpin pemberontakan Madiun 1948?", opts:["Musso","Tan Malaka","Sutan Sjahrir","Hatta"], a:"Musso" },
Â  Â  Â  { q:"Trikora bertujuan merebutâ€¦", opts:["Irian Barat (Papua)","Malaya","Timor Leste","Sulawesi Utara"], a:"Irian Barat (Papua)" },
Â  Â  Â  { q:"Perbedaan UUD 1945 dan UUDS 1950: UUDS menerapkanâ€¦", opts:["Sistem parlementer","Sistem presidensial","Monarki","Federasi"], a:"Sistem parlementer" },
Â  Â  Â  { q:"Apa nama sistem tanam paksa Belanda?", opts:["Cultuurstelsel","Tanam Paksu","Rotasi Tanam","Swadeshi"], a:"Cultuurstelsel" },
Â  Â  Â  { q:"Siapa yang mengetik naskah proklamasi?", opts:["Sayuti Melik","Sutan Sjahrir","Soepomo","Achmad Soebardjo"], a:"Sayuti Melik" },
Â  Â  Â  { q:"Siapa presiden kedua RI?", opts:["Soeharto","Soekarno","Habibie","Gus Dur"], a:"Soeharto" },
Â  Â  Â  { q:"Tanggal peringatan pertempuran Surabaya?", opts:["10 November","17 Agustus","28 Oktober","1 Juni"], a:"10 November" },
Â  Â  Â  { q:"Apa nama 'Taman Siswa' didirikan oleh?", opts:["Ki Hajar Dewantara","KH Ahmad Dahlan","Sukarno","Hatta"], a:"Ki Hajar Dewantara" },
Â  Â  Â  { q:"Peristiwa Serangan Umum 1 Maret 1949 terjadi diâ€¦", opts:["Solo (Surakarta)","Yogyakarta","Jakarta","Medan"], a:"Yogyakarta" },

Â  Â  Â  /* --- SMK / lanjutan (51-80) --- */
Â  Â  Â  { q:"Siapa Perdana Menteri pertama Republik Indonesia (Kabinet Sjahrir)?", opts:["Sutan Sjahrir","Sukarno","Hatta","Soeharto"], a:"Sutan Sjahrir" },
Â  Â  Â  { q:"Apa yang dimaksud 'Politik Etis' Belanda?", opts:["Kebijakan kompensasi berupa pendidikan dan infrastruktur","Kebijakan penjarahan","Pembentukan VOC","Politik ekspor"], a:"Kebijakan kompensasi berupa pendidikan dan infrastruktur" },
Â  Â  Â  { q:"Perang Diponegoro (1825â€“1830) dipicu olehâ€¦", opts:["Kebijakan pajak dan campur tangan Belanda","Pertikaian suku","Perang agama","Krisis pangan"], a:"Kebijakan pajak dan campur tangan Belanda" },
Â  Â  Â  { q:"Peran VOC di Nusantara pada abad ke-17 adalahâ€¦", opts:["Perdagangan rempah dan monopoli dagang","Pendidikan massa","Pemerintahan modern","Pertanian besar"], a:"Perdagangan rempah dan monopoli dagang" },
Â  Â  Â  { q:"Setelah bubarnya VOC (1799), pemerintahan digantikan olehâ€¦", opts:["Pemerintahan Hindia Belanda di bawah pusat Belanda","VOC tetap berlanjut","Kerajaan Nusantara","Pemerintahan Jepang"], a:"Pemerintahan Hindia Belanda di bawah pusat Belanda" },
Â  Â  Â  { q:"Perjanjian Giyanti (1755) mengakibatkanâ€¦", opts:["Pembagian Mataram menjadi Yogyakarta & Surakarta","Persatuan Jawa","Akhir VOC","Kemerdekaan Indonesia"], a:"Pembagian Mataram menjadi Yogyakarta & Surakarta" },
Â  Â  Â  { q:"Apa latar belakang Indische Partij (1912)?", opts:["Kaum intelektual pro-kemerdekaan di perantauan Belanda","Pengembangan perdagangan","Organisasi militer","Sekolah baru"], a:"Kaum intelektual pro-kemerdekaan di perantauan Belanda" },
Â  Â  Â  { q:"Rengasdengklok terkait denganâ€¦", opts:["Upaya memindahkan Soekarno-Hatta agar proklamasi segera dilaksanakan","Perjanjian dagang","Kongres pemuda","Pertempuran besar"], a:"Upaya memindahkan Soekarno-Hatta agar proklamasi segera dilaksanakan" },
Â  Â  Â  { q:"Siapa dikenal 'Bapak koperasi Indonesia'?", opts:["Mohammad Hatta","Sukarno","Ki Hajar Dewantara","Sudirman"], a:"Mohammad Hatta" },
Â  Â  Â  { q:"Hasil utama KMB 1949 adalahâ€¦", opts:["Belanda mengakui kedaulatan RI secara de jure","Pembentukan negara baru di Papua","Perjanjian militer","Perdagangan bebas"], a:"Belanda mengakui kedaulatan RI secara de jure" },
Â  Â  Â  { q:"Siapa tokoh pejuang Aceh akhir 1800-an?", opts:["Teuku Umar & Cut Nyak Dien","Pattimura","Diponegoro","Sultan Hasanuddin"], a:"Teuku Umar & Cut Nyak Dien" },
Â  Â  Â  { q:"Apa tujuan politik luar negeri non-blok Indonesia?", opts:["Menjaga kemerdekaan dari dua blok besar","Bergabung NATO","Menjadi satelit negara","Eksklusif dagang"], a:"Menjaga kemerdekaan dari dua blok besar" },
Â  Â  Â  { q:"Apa itu Perjanjian Renville (1948)?", opts:["Perjanjian yang menetapkan garis demarkasi dan syarat gencatan senjata","Perjanjian perdagangan","Perjanjian maritim","Perjanjian pendidikan"], a:"Perjanjian yang menetapkan garis demarkasi dan syarat gencatan senjata" },
Â  Â  Â  { q:"Penyebab DI/TII pada 1950-an salah satunya adalahâ€¦", opts:["Ketidakpuasan terhadap sentralisasi & ideologi","Masalah cuaca","Invasi asing","Krisis ekonomi global"], a:"Ketidakpuasan terhadap sentralisasi & ideologi" },
Â  Â  Â  { q:"Siapa tokoh PRRI/Permesta pada 1958 secara garis besar?", opts:["Tokoh militer & politik daerah menentang pusat","Soekarno","Soeharto","Hatta"], a:"Tokoh militer & politik daerah menentang pusat" },
Â  Â  Â  { q:"Apa dampak Cultuurstelsel bagi rakyat?", opts:["Eksploitasi dan penderitaan petani","Kemakmuran","Kemerdekaan dini","Perdagangan merata"], a:"Eksploitasi dan penderitaan petani" },
Â  Â  Â  { q:"Apa peran BKR pada masa awal kemerdekaan?", opts:["Pembentukan inti pasukan keamanan sebelum TNI terbentuk","Organisasi perdagangan","Kelompok politik","Partai pemuda"], a:"Pembentukan inti pasukan keamanan sebelum TNI terbentuk" },

Â  Â  Â  /* --- 81-100 tambahan --- */
Â  Â  Â  { q:"Peran Sultan Agung di Jawa adalahâ€¦", opts:["Memperkuat Mataram & melawan VOC","Mendirikan VOC","Menyerah pada Belanda","Menjadi raja di Sumatra"], a:"Memperkuat Mataram & melawan VOC" },
Â  Â  Â  { q:"Fungsi BPUPKI tahun 1945 adalahâ€¦", opts:["Membahas dasar negara & UUD menjelang kemerdekaan","Mengatur perdagangan","Mendirikan sekolah","Menjaga ketertiban"], a:"Membahas dasar negara & UUD menjelang kemerdekaan" },
Â  Â  Â  { q:"Siapa yang mengusulkan Pancasila dalam pidato 1 Juni 1945?", opts:["Soekarno","Hatta","Soepomo","Sutan Sjahrir"], a:"Soekarno" },
Â  Â  Â  { q:"Siapa pemimpin yang terkenal dari Bali (perjuangan kemerdekaan modern)?", opts:["I Gusti Ngurah Rai","Pattimura","Cut Nyak Dien","Sam Ratulangi"], a:"I Gusti Ngurah Rai" },
Â  Â  Â  { q:"Apa arti Nasionalisme dalam konteks pergerakan awal?", opts:["Kesadaran bersama merdeka dari penjajahan","Dominasi asing","Kolonialisasi internal","Ekspansi wilayah"], a:"Kesadaran bersama merdeka dari penjajahan" },
Â  Â  Â  { q:"Siapa pemimpin penting dalam Serangan Umum 1 Maret 1949?", opts:["Sudirman & pejuang lokal","Soekarno","Hatta","Soeharto"], a:"Sudirman & pejuang lokal" },
Â  Â  Â  { q:"Apa arti 'Agresi Militer Belanda' 1947/1948?", opts:["Operasi militer Belanda melawan RI pasca-proklamasi","Perang dunia","Invasi Jepang","Perang sipil"], a:"Operasi militer Belanda melawan RI pasca-proklamasi" },
Â  Â  Â  { q:"Peran H.O.S. Tjokroaminoto penting karenaâ€¦", opts:["Mendidik pemimpin pergerakan (guru Soekarno dkk)","Menjadi raja","Pemimpin militer","Tokoh VOC"], a:"Mendidik pemimpin pergerakan (guru Soekarno dkk)" },
Â  Â  Â  { q:"Siapa tokoh yang terkenal dari Sulawesi Utara?", opts:["Sam Ratulangi","Pattimura","Sultan Hasanuddin","Diponegoro"], a:"Sam Ratulangi" },
Â  Â  Â  { q:"Siapa yang mengetik naskah proklamasi membantu Soekarno-Hatta?", opts:["Sayuti Melik","Achmad Soebardjo","Sutan Sjahrir","Soepomo"], a:"Sayuti Melik" }
Â  Â  ];

Â  Â  /* ---------- Sanitasi & deduplikasi ---------- */
Â  Â  function normalizeQuestions(raw){
Â  Â  Â  const seen = new Set();
Â  Â  Â  const list = [];
Â  Â  Â  for(const item of raw){
Â  Â  Â  Â  const qtext = (item.q||"").trim();
Â  Â  Â  Â  if(!qtext) continue;
Â  Â  Â  Â  if(seen.has(qtext)) continue;
Â  Â  Â  Â  seen.add(qtext);
Â  Â  Â  Â  let opts = Array.isArray(item.opts) ? item.opts.map(s=>String(s).trim()) : [];
Â  Â  Â  Â  const oseen = new Set();
Â  Â  Â  Â  const uniq = [];
Â  Â  Â  Â  for(const o of opts){ if(!oseen.has(o)){ uniq.push(o); oseen.add(o); } }
Â  Â  Â  Â  const answer = String(item.a || "").trim();
Â  Â  Â  Â  if(answer && !oseen.has(answer)){ uniq.push(answer); oseen.add(answer); }
Â  Â  Â  Â  const fillers = ["Tidak Tahu","Tidak Benar","Pilihan Lain","Peristiwa Lain"];
Â  Â  Â  Â  let fi = 0;
Â  Â  Â  Â  while(uniq.length < 4 && fi < fillers.length){
Â  Â  Â  Â  Â  const f = fillers[fi++] + (uniq.length);
Â  Â  Â  Â  Â  if(!oseen.has(f)){ uniq.push(f); oseen.add(f); }
Â  Â  Â  Â  }
Â  Â  Â  Â  if(uniq.length > 4){
Â  Â  Â  Â  Â  if(!uniq.slice(0,4).includes(answer)){
Â  Â  Â  Â  Â  Â  uniq = [answer].concat(uniq.filter(x=>x!==answer)).slice(0,4);
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  uniq = uniq.slice(0,4);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  list.push({ q: qtext, opts: uniq, a: answer || uniq[0] });
Â  Â  Â  }
Â  Â  Â  return list;
Â  Â  }

Â  Â  const allQuestions = normalizeQuestions(rawQuestions);

Â  Â  /* ---------- Settings & State ---------- */
Â  Â  let QUESTIONS_COUNT = 20;
Â  Â  let questions = [];
Â  Â  let current = 0;
Â  Â  let score = 0;
Â  Â  let player = "";
Â  Â  let timeLeft = 15;
Â  Â  let timer = null;

Â  Â  // elements
Â  Â  const startScreen = document.getElementById('startScreen');
Â  Â  const quizScreen = document.getElementById('quizScreen');
Â  Â  const resultScreen = document.getElementById('resultScreen');
Â  Â  const playerInput = document.getElementById('playerName');
Â  Â  const questionText = document.getElementById('questionText');
Â  Â  const optionsDiv = document.getElementById('options');
Â  Â  const timerEl = document.getElementById('timer');
Â  Â  const progressEl = document.getElementById('progress');
Â  Â  const notif = document.getElementById('notif');
Â  Â  const resultText = document.getElementById('resultText');
Â  Â  const scoreDetail = document.getElementById('scoreDetail');
Â  Â  const startBtn = document.getElementById('startBtn');
Â  Â  const perQuestionTimeEl = document.getElementById('perQuestionTime');

Â  Â  // helper notif
Â  Â  function showNotif(type, text){
Â  Â  Â  notif.innerHTML = `<span class="stamp ${type}">${text}</span>`;
Â  Â  Â  setTimeout(()=>{ notif.innerHTML = ''; }, 900);
Â  Â  }

Â  Â  // Settings toggles
Â  Â  function toggleSettings(){
Â  Â  Â  const el = document.getElementById('settings');
Â  Â  Â  el.style.display = el.style.display === 'none' ? 'block' : 'none';
Â  Â  }

Â  Â  document.getElementById('perGame').addEventListener('change', (e)=>{
Â  Â  Â  QUESTIONS_COUNT = parseInt(e.target.value,10) || 20;
Â  Â  });

Â  Â  /* ---------- pick random unique questions ---------- */
Â  Â  function pickRandomQuestions(){
Â  Â  Â  const shufflePool = document.getElementById('shufflePool') ? document.getElementById('shufflePool').checked : true;
Â  Â  Â  let pool = allQuestions.slice();
Â  Â  Â  if(shufflePool){
Â  Â  Â  Â  for(let i=pool.length-1;i>0;i--){
Â  Â  Â  Â  Â  const j = Math.floor(Math.random()*(i+1));
Â  Â  Â  Â  Â  [pool[i], pool[j]] = [pool[j], pool[i]];
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  return pool.slice(0, Math.min(QUESTIONS_COUNT, pool.length));
Â  Â  }

Â  Â  /* ---------- Quiz flow ---------- */
Â  Â  function startQuiz(){
Â  Â  Â  const name = playerInput.value.trim();
Â  Â  Â  if(!name){
Â  Â  Â  Â  showNotif('wrong','âš ï¸ Masukkan nama dulu!');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  player = name;
Â  Â  Â  QUESTIONS_COUNT = parseInt(document.getElementById('perGame').value,10) || 20;
Â  Â  Â  questions = pickRandomQuestions();
Â  Â  Â  current = 0;
Â  Â  Â  score = 0;
Â  Â  Â  startScreen.style.display = 'none';
Â  Â  Â  resultScreen.style.display = 'none';
Â  Â  Â  quizScreen.style.display = 'block';
Â  Â  Â  scoreDetail.style.display = 'none';
Â  Â  Â  perQuestionTimeEl.textContent = timeLeft = 15;
Â  Â  Â  startBtn.blur();
Â  Â  Â  renderQuestion();
Â  Â  Â  startTimer();
Â  Â  }

Â  Â  function startTimer(){
Â  Â  Â  timeLeft = parseInt(15,10);
Â  Â  Â  timerEl.textContent = `â³ Waktu: ${timeLeft}s`;
Â  Â  Â  clearInterval(timer);
Â  Â  Â  timer = setInterval(()=>{
Â  Â  Â  Â  timeLeft--;
Â  Â  Â  Â  timerEl.textContent = `â³ Waktu: ${timeLeft}s`;
Â  Â  Â  Â  if(timeLeft <= 0){
Â  Â  Â  Â  Â  clearInterval(timer);
Â  Â  Â  Â  Â  Array.from(optionsDiv.children).forEach(c => c.style.pointerEvents = 'none');
Â  Â  Â  Â  Â  const q = questions[current];
Â  Â  Â  Â  Â  Array.from(optionsDiv.children).forEach(c => { if(c.textContent === q.a) c.classList.add('correct'); });
Â  Â  Â  Â  Â  showNotif('timeout','â° Waktu Habis!');
Â  Â  Â  Â  Â  setTimeout(()=> nextQuestion(), 900);
Â  Â  Â  Â  }
Â  Â  Â  },1000);
Â  Â  }

Â  Â  function renderQuestion(){
Â  Â  Â  const q = questions[current];
Â  Â  Â  progressEl.textContent = `Soal ${current+1} / ${questions.length}`;
Â  Â  Â  questionText.textContent = `â“ ${q.q}`;
Â  Â  Â  optionsDiv.innerHTML = '';
Â  Â  Â  const opts = q.opts.slice();
Â  Â  Â  for(let i=opts.length-1;i>0;i--){
Â  Â  Â  Â  const j = Math.floor(Math.random()*(i+1));
Â  Â  Â  Â  [opts[i], opts[j]] = [opts[j], opts[i]];
Â  Â  Â  }
Â  Â  Â  opts.forEach(opt=>{
Â  Â  Â  Â  const el = document.createElement('div');
Â  Â  Â  Â  el.className = 'opt';
Â  Â  Â  Â  el.textContent = opt;
Â  Â  Â  Â  el.onclick = ()=> handleAnswerClick(el, opt);
Â  Â  Â  Â  optionsDiv.appendChild(el);
Â  Â  Â  });
Â  Â  }

Â  Â  function handleAnswerClick(el, selected){
Â  Â  Â  clearInterval(timer);
Â  Â  Â  const q = questions[current];
Â  Â  Â  Array.from(optionsDiv.children).forEach(c => c.style.pointerEvents = 'none');
Â  Â  Â  if(selected === q.a){
Â  Â  Â  Â  score += 5;
Â  Â  Â  Â  el.classList.add('correct');
Â  Â  Â  Â  showNotif('correct','âœ… Benar!');
Â  Â  Â  } else {
Â  Â  Â  Â  el.classList.add('wrong');
Â  Â  Â  Â  Array.from(optionsDiv.children).forEach(c => { if(c.textContent === q.a) c.classList.add('correct'); });
Â  Â  Â  Â  showNotif('wrong','âŒ Salah!');
Â  Â  Â  }
Â  Â  Â  setTimeout(()=> nextQuestion(), 900);
Â  Â  }

Â  Â  function nextQuestion(){
Â  Â  Â  current++;
Â  Â  Â  if(current < questions.length){
Â  Â  Â  Â  renderQuestion();
Â  Â  Â  Â  startTimer();
Â  Â  Â  } else {
Â  Â  Â  Â  endQuiz();
Â  Â  Â  }
Â  Â  }

Â  Â  function endQuiz(){
Â  Â  Â  clearInterval(timer);
Â  Â  Â  quizScreen.style.display = 'none';
Â  Â  Â  resultScreen.style.display = 'block';
Â  Â  Â  resultText.textContent = `ğŸŠ ${player}, skor kamu: ${score} dari ${questions.length*5} poin.`;
Â  Â  Â  scoreDetail.style.display = 'none';
Â  Â  Â  try{
Â  Â  Â  Â  const hist = JSON.parse(localStorage.getItem('quizHistory')||'[]');
Â  Â  Â  Â  hist.push({ name: player, score, max: questions.length*5, percent: Math.round((score/(questions.length*5))*100), date: (new Date()).toISOString() });
Â  Â  Â  Â  localStorage.setItem('quizHistory', JSON.stringify(hist.slice(-100)));
Â  Â  Â  }catch(e){}
Â  Â  }

Â  Â  function showScore(){
Â  Â  Â  const max = questions.length * 5;
Â  Â  Â  const nilai = (score / max) * 100;
Â  Â  Â  let grade = '';
Â  Â  Â  if(nilai >= 85) grade = 'Sangat Baik';
Â  Â  Â  else if(nilai >= 70) grade = 'Baik';
Â  Â  Â  else if(nilai >= 50) grade = 'Cukup';
Â  Â  Â  else grade = 'Perlu Latihan';
Â  Â  Â  scoreDetail.style.display = 'block';
Â  Â  Â  scoreDetail.textContent = `Nilai: ${nilai.toFixed(0)} | Kategori: ${grade}`;
Â  Â  }

Â  Â  function showAllQuestions(){
Â  Â  Â  const lines = allQuestions.map((s,i)=> `${i+1}. ${s.q} â€” Jawab: ${s.a}`).join('\n\n');
Â  Â  Â  const w = window.open();
Â  Â  Â  w.document.write('<pre style="font-family:Georgia,serif;font-size:15px;white-space:pre-wrap;color:#fff;background:#111;padding:16px;">' + escapeHtml(lines) + '</pre>');
Â  Â  Â  w.document.title = 'Daftar Soal';
Â  Â  }

Â  Â  function escapeHtml(s){
Â  Â  Â  return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
Â  Â  }

Â  Â  // expose functions
Â  Â  window.startQuiz = startQuiz;
Â  Â  window.showScore = showScore;
Â  Â  window.showAllQuestions = showAllQuestions;
Â  Â  window.toggleSettings = toggleSettings;

Â  Â  playerInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') startQuiz(); });

Â  Â  // quick safety: log how many unique questions we have
Â  Â  console.log("Total soal di bank:", allQuestions.length);
Â  </script>
</body>
</html>
